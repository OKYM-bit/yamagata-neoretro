<div id="cursor"></div>

<header class="fixed top-0 w-full p-6 z-50 flex justify-between items-center mix-blend-difference">
    <a href="#" class="font-pixel text-2xl text-ne-white hover-trigger" data-cursor="hovered">
        <span class="text-ne-red">Y</span><span class="text-ne-blue">A</span><span class="text-ne-yellow">R</span><span class="text-ne-green">.</span>
    </a>
    <nav class="hidden md:flex gap-8 font-mono text-sm text-ne-white">
        <a href="#concept" class="hover-trigger underline-offset-4 hover:underline decoration-ne-red" data-cursor="hovered">CONCEPT</a>
        <a href="#flow" class="hover-trigger underline-offset-4 hover:underline decoration-ne-blue" data-cursor="hovered">FLOW</a>
        <a href="#contact" class="hover-trigger underline-offset-4 hover:underline decoration-ne-yellow" data-cursor="hovered">CONTACT</a>
    </nav>
    <button class="md:hidden font-pixel text-sm text-ne-white hover-trigger" data-cursor="hovered">[MENU]</button>
</header>

<main>
    <section id="hero" class="relative w-full h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 z-0 opacity-50">
            <div class="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-ne-blue/20 to-transparent" style="clip-path: polygon(0% 100%, 20% 60%, 40% 80%, 60% 40%, 80% 70%, 100% 50%, 100% 100%);"></div>
            <div class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-ne-red/20 to-transparent" style="clip-path: polygon(0% 100%, 30% 70%, 50% 90%, 70% 60%, 90% 80%, 100% 70%, 100% 100%);"></div>
            <div class="absolute top-1/4 right-1/4 w-32 h-32 bg-ne-yellow rounded-full blur-xl animate-pulse"></div>
            <div class="absolute top-20 left-20 text-ne-green font-pixel text-4xl animate-float opacity-50">+</div>
            <div class="absolute bottom-40 right-40 text-ne-red font-pixel text-4xl animate-float opacity-50" style="animation-delay: 1s;">×</div>
        </div>

        <div class="relative z-10 text-center">
            <h1 class="text-6xl md:text-9xl font-black leading-none mb-6 glitch-text font-pixel" data-text="YAMAGATA NEO-RETRO">
                YAMAGATA<br>NEO-RETRO
            </h1>
            <p class="text-xl md:text-2xl font-mono tracking-widest text-ne-blue">
                <span class="bg-ne-white text-ne-black px-2">&gt; 空き家再生、再起動。</span>
            </p>
        </div>
        
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 font-pixel text-xs text-ne-white animate-bounce">
            ↓ SCROLL TO PLAY ↓
        </div>
    </section>

    <div class="w-full bg-ne-blue text-ne-white py-3 overflow-hidden border-y-4 border-ne-black">
        <div class="marquee-container font-pixel text-xl">
            <div class="marquee-content gap-8">
                <span>*** UNLIMITED DIY ***</span><span>[PRESS START]</span><span>*** PETS OK ***</span><span>[INSERT COIN]</span><span>*** SINGLE HOUSE ONLY ***</span><span>[LEVEL UP]</span>
                <span>*** UNLIMITED DIY ***</span><span>[PRESS START]</span><span>*** PETS OK ***</span><span>[INSERT COIN]</span><span>*** SINGLE HOUSE ONLY ***</span><span>[LEVEL UP]</span>
            </div>
        </div>
    </div>

    <section id="concept" class="relative w-full py-32 px-6 overflow-hidden">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
            <div>
                <span class="font-mono text-ne-red text-sm mb-4 block">&gt; MISSION 01: CREATE</span>
                <h2 class="text-4xl md:text-6xl font-black mb-8 font-serif">
                    <span class="text-ne-white" style="-webkit-text-stroke: 2px var(--ne-black);">壊して、</span><br>
                    <span class="text-ne-yellow text-outline" style="text-shadow: 3px 3px 0 var(--ne-red);">創り変えろ。</span>
                </h2>
                <p class="text-ne-white/80 font-mono leading-relaxed mb-8">
                    // 原状回復？ そんな古いルールはバグだ。<br>
                    // 壁を壊せ。色を塗れ。床を剥がせ。<br>
                    // ここは君の実験場。許可はいらない。
                </p>
            </div>

            <div class="relative w-full aspect-square border-4 border-ne-white p-2 bg-ne-black hover-trigger group" id="destroy-zone" data-cursor="active">
                <div class="absolute inset-0 z-20 transition-all duration-200 pointer-events-none mix-blend-hard-light" id="pixel-layer">
                    <div class="pixel-house"></div>
                </div>
                
                <div class="absolute inset-0 z-10 bg-ne-black flex items-center justify-center overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-ne-red via-ne-yellow to-ne-blue opacity-50 animate-spin-slow blur-xl"></div>
                    <h3 class="relative z-30 font-pixel text-5xl md:text-7xl text-ne-white text-center leading-tight">
                        CREATE<br>YOUR<br><span class="text-ne-green">WORLD</span>
                    </h3>
                    <div class="absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRaPSI1MCIgaGVpZ2h0PSI1MCI+PGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjAiIGZpbGw9IiNmZmZkMmUiIG9wYWNpdHk9IjAuMSIvPjwvc3ZnPg==')] bg-repeat opacity-20 animate-glitch"></div>
                </div>

                <div class="absolute bottom-4 right-4 font-pixel text-xs text-ne-black bg-ne-white px-2 py-1">
                    [MOVE CURSOR TO DESTROY]
                </div>
            </div>
        </div>
    </section>

    <section class="relative w-full py-32 bg-ne-white text-ne-black overflow-hidden">
        <div class="absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAADNJREFUGBljYGBg+A/E/4F4ExAzAvF/IGaE8hkhDLAJIgqgCqC8/0DMCIT/A/F/IGYEAAbOCw763yW/AAAAAElFTkSuQmCC')] opacity-10"></div>
        
        <div class="container mx-auto px-6 text-center relative z-10">
             <span class="font-mono text-ne-blue text-sm mb-4 block">&gt; MISSION 02: FAMILY</span>
            <h2 class="text-5xl md:text-7xl font-black mb-6 font-serif">
                全種族、<br>ウェルカム。
            </h2>
            <p class="text-ne-black/70 mb-20 max-w-xl mx-auto font-mono">
                // 犬、猫、爬虫類、etc...<br>
                // どんなバディも、ここでは主役だ。
            </p>
        </div>

        <div class="relative w-full h-[400px] flex justify-center items-center overflow-hidden" id="sticker-zone">
            <div class="sticker absolute font-pixel text-ne-white bg-ne-red p-4 shadow-[4px_4px_0px_0px_var(--ne-black)] rotate-12 hover-trigger" data-cursor="hovered" data-speed="0.8">
                <span class="block text-2xl mb-2">👾 DOGS!</span>
                <div class="w-16 h-8 bg-ne-white mx-auto" style="clip-path: polygon(0% 20%, 20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%);"></div>
            </div>
            <div class="sticker absolute font-pixel text-ne-black bg-ne-yellow p-6 shadow-[4px_4px_0px_0px_var(--ne-black)] -rotate-6 top-1/4 left-1/4 hover-trigger" data-cursor="hovered" data-speed="1.2">
                 <span class="block text-3xl mb-2">😻 CATS!</span>
                 <div class="w-12 h-12 bg-ne-black mx-auto rounded-full"></div>
            </div>
            <div class="sticker absolute font-pixel text-ne-white bg-ne-blue p-3 shadow-[4px_4px_0px_0px_var(--ne-black)] rotate-[20deg] bottom-1/3 right-1/4 hover-trigger" data-cursor="hovered" data-speed="1.5">
                 <span class="block text-xl">🦕 DINO?</span>
            </div>
            <div class="sticker absolute font-pixel text-ne-white bg-ne-green p-5 shadow-[4px_4px_0px_0px_var(--ne-black)] -rotate-12 bottom-1/4 left-1/3 hover-trigger" data-cursor="hovered" data-speed="0.6">
                 <span class="block text-2xl">👽 ALIENS?</span>
            </div>

            <div class="absolute z-0 opacity-10 font-pixel text-[15vw] leading-none text-center pointer-events-none select-none text-ne-blue">
                ALL<br>OK!
            </div>
        </div>
    </section>

    <section id="flow" class="relative w-full py-32 bg-ne-black text-ne-white">
        <div class="container mx-auto px-6 relative z-10">
            <span class="font-mono text-ne-green text-sm mb-4 block">&gt; GAME MAP</span>
            <h2 class="text-4xl md:text-6xl font-black mb-16 font-serif">
                入居までの<br>攻略ルート
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative">
                <svg class="hidden md:block absolute top-1/2 left-0 w-full h-20 -translate-y-1/2 pointer-events-none z-0" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0,10 H33% Q50%,10 50%,50 Q50%,90 66%,90 H100%" stroke="var(--ne-blue)" stroke-width="4" fill="none" stroke-dasharray="10,10" class="animate-pulse"/>
                </svg>

                <div class="relative z-10 bg-ne-black border-4 border-ne-blue p-6 retro-shadow hover-trigger group rounded-none" data-cursor="hovered">
                    <div class="font-pixel text-ne-yellow text-4xl mb-4 absolute -top-6 -left-4 bg-ne-black px-2">STAGE 1</div>
                    <div class="w-16 h-16 bg-ne-blue mb-6 animate-bounce-slow mx-auto" style="clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);"></div> <h3 class="text-xl font-bold mb-2 font-serif">サーチ＆内見</h3>
                    <p class="font-mono text-sm text-ne-white/70">
                        // ターゲット物件を発見せよ。<br>現地でリアルな空気感をスキャン。
                    </p>
                </div>
                <div class="relative z-10 bg-ne-black border-4 border-ne-red p-6 retro-shadow hover-trigger group rounded-none mt-12 md:mt-24" data-cursor="hovered">
                    <div class="font-pixel text-ne-yellow text-4xl mb-4 absolute -top-6 -left-4 bg-ne-black px-2">STAGE 2</div>
                     <div class="w-16 h-16 bg-ne-red mb-6 animate-spin-slow mx-auto" style="clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);"></div> <h3 class="text-xl font-bold mb-2 font-serif">契約＆作戦会議</h3>
                    <p class="font-mono text-sm text-ne-white/70">
                        // ボス（オーナー）と交渉。<br>DIY計画という名のチートコードを入力。
                    </p>
                </div>
                <div class="relative z-10 bg-ne-black border-4 border-ne-green p-6 retro-shadow hover-trigger group rounded-none mt-12 md:mt-0" data-cursor="hovered">
                    <div class="font-pixel text-ne-yellow text-4xl mb-4 absolute -top-6 -left-4 bg-ne-black px-2">STAGE 3</div>
                     <div class="w-16 h-16 bg-ne-green mb-6 animate-pulse mx-auto" style="clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);"></div> <h3 class="text-xl font-bold mb-2 font-serif">ゲームスタート</h3>
                    <p class="font-mono text-sm text-ne-white/70">
                        // 鍵（キーアイテム）を入手。<br>君だけのワールドビルディングが始まる。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="py-40 text-center bg-ne-blue relative overflow-hidden">
         <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRaPSI1MCIgaGVpZ2h0PSI1MCI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjMDAwIiBvcGFjaXR5PSIwLjEiLz48L3N2Zz4=')] opacity-20 mix-blend-overlay animate-glitch"></div>

        <div class="relative z-10 container mx-auto px-6">
            <h2 class="text-4xl md:text-6xl mb-12 font-serif font-black text-ne-white">
                準備はいいか？<br>
                <span class="text-ne-yellow" style="text-shadow: 3px 3px 0 var(--ne-red);">新しい冒険へ。</span>
            </h2>
            
            <a href="#" class="relative inline-block group hover-trigger my-8" data-cursor="hovered">
                <div class="absolute inset-0 bg-ne-yellow translate-x-2 translate-y-2 group-hover:translate-x-4 group-hover:translate-y-4 transition-transform w-full h-full border-4 border-ne-black"></div>
                <div class="relative bg-ne-red text-ne-white px-12 md:px-24 py-6 font-pixel text-2xl md:text-3xl border-4 border-ne-black active:translate-x-2 active:translate-y-2 transition-transform flex items-center gap-4">
                    <span>PRESS START</span>
                    <span class="animate-pulse">▶</span>
                </div>
            </a>
            
            <p class="mt-12 text-ne-white/80 font-mono text-sm">
                // 営業マンは出現しません。<br>// セーブデータは安全です。
            </p>
        </div>

        <footer class="mt-32 text-xs font-pixel text-ne-white/60 relative z-10">
            © 2025 YAR. | GAME OVER / CONTINUE?
        </footer>
    </section>

</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://unpkg.com/@studio-freight/lenis@1.0.29/dist/lenis.min.js"></script>

<script>
    // Initialize Lenis for Smooth Scroll
    const lenis = new Lenis({
        duration: 1.5,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smooth: true
    });
    function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);

    gsap.registerPlugin(ScrollTrigger);

    // --- Custom Cursor Logic ---
    const cursor = document.getElementById('cursor');
    const hoverTriggers = document.querySelectorAll('.hover-trigger');

    document.addEventListener('mousemove', (e) => {
        gsap.to(cursor, {
            x: e.clientX,
            y: e.clientY,
            duration: 0.15, // Slightly faster for retro feel
            ease: "power2.out"
        });

        // DIY Section: Pixel Destruction Effect
        const destroyZone = document.getElementById('destroy-zone');
        const pixelLayer = document.getElementById('pixel-layer');
        if (destroyZone && pixelLayer && destroyZone.matches(':hover')) {
            const rect = destroyZone.getBoundingClientRect();
            // Simple distance-based opacity for "destruction"
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const dist = Math.sqrt(Math.pow(e.clientX - centerX, 2) + Math.pow(e.clientY - centerY, 2));
            const maxDist = rect.width / 1.5;
            const opacity = Math.min(1, dist / maxDist);
            
            gsap.to(pixelLayer, {
                opacity: opacity > 0.2 ? opacity : 0, // Snap to 0 when close center
                filter: `blur(${ (1 - opacity) * 20 }px)`, // Add blur for glitch effect
                duration: 0.2
            });
        } else if (pixelLayer) {
             gsap.to(pixelLayer, { opacity: 0.2, filter: 'blur(0px)', duration: 0.5 });
        }

        // Sticker Magnetic Effect
        const stickers = document.querySelectorAll('.sticker');
        stickers.forEach(sticker => {
            const speed = sticker.getAttribute('data-speed');
            const x = (window.innerWidth / 2 - e.clientX) * speed / 20;
            const y = (window.innerHeight / 2 - e.clientY) * speed / 20;
            gsap.to(sticker, {
                x: x,
                y: y,
                duration: 0.5,
                ease: "back.out(1.5)" // Bouncy retro feel
            });
        });
    });

    // Cursor State Changes
    hoverTriggers.forEach(t => {
        t.addEventListener('mouseenter', () => {
            const type = t.getAttribute('data-cursor');
            cursor.classList.add(type);
        });
        t.addEventListener('mouseleave', () => {
             cursor.classList.remove('hovered', 'active');
        });
    });

    // --- Animations ---

    // Hero Text Glitch Entrance
    gsap.from(".glitch-text", {
        scale: 1.5,
        opacity: 0,
        filter: "blur(20px)",
        duration: 1.5,
        ease: "elastic.out(1, 0.5)",
        delay: 0.5
    });

    // Sticker Random Floating (Idle)
    const stickers = document.querySelectorAll('.sticker');
    stickers.forEach(sticker => {
        gsap.to(sticker, {
            y: "random(-20, 20)",
            x: "random(-20, 20)",
            rotation: "random(-10, 10)",
            duration: "random(2, 4)",
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut"
        });
    });

    // Scroll-based Parallax & Rotation
    gsap.utils.toArray('section').forEach(section => {
        gsap.to(section, {
            scrollTrigger: {
                trigger: section,
                start: "top bottom",
                end: "bottom top",
                scrub: true
            },
            // Subtle rotation based on scroll direction for psychedelic effect
            rotation: (i) => (i % 2 === 0 ? 2 : -2), 
            scale: 1.05,
            ease: "none"
        });
    });

    // Flow Path Animation
    gsap.from("#flow path", {
        scrollTrigger: {
            trigger: "#flow",
            start: "top center",
            end: "bottom center",
            scrub: 1
        },
        strokeDashoffset: 1000, // Animate dashed line drawing
        ease: "none"
    });

</script>

<style type="text/tailwindcss">
    @layer utilities {
      .animate-bounce-slow {
        animation: bounce 3s infinite;
      }
      .animate-spin-slow {
        animation: spin 15s linear infinite;
      }
    }
  </style>